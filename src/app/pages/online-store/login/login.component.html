<div class="view-container">
    <div class="row view-full">
        <div [style.border-right]="mobileQuery.matches ? 'none' : '1px solid #000000'" class="col-md-6">
            <h1 class="title">Iniciar sesión</h1>
            <h2 class="subtitle">Inicia sesión para mejorar tu experiencía comprando</h2>
            <form (ngSubmit)="onSubmit()" [formGroup]="loginForm" class="d-flex flex-column">
                <div *ngIf="!userNotConfirmed"
                     class="d-flex flex-column">
                    <mat-form-field appearance="outline" class="mt-3" floatLabel="always">
                        <mat-label>Correo electrónico</mat-label>
                        <input formControlName="email"
                               matInput
                               placeholder="usuario@correo.com"
                               type="text">
                    </mat-form-field>
                    <mat-error *ngIf="f.email.hasError('email') && f.email.touched">
                        Por favor ingresa un correo valido
                    </mat-error>
                    <mat-error *ngIf="f.email.hasError('required') && f.email.touched">
                        Ingresa tu correo
                    </mat-error>
                    <mat-form-field appearance="outline" class="mt-4" floatLabel="always">
                        <mat-label>Contraseña</mat-label>
                        <input [type]="hide ? 'password' : 'text'"
                               formControlName="password"
                               matInput>
                        <mat-icon (click)="hide = !hide" matSuffix>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </mat-form-field>
                    <mat-error *ngIf="f.password.hasError('required') && f.email.touched">
                        Ingresa tu contraseña
                    </mat-error>
                </div>

                <mat-form-field *ngIf="userNotConfirmed" appearance="outline" class="mt-4" floatLabel="always">
                    <mat-label>Código de confirmación</mat-label>
                    <input formControlName="confirm"
                           matInput
                           type="text">
                </mat-form-field>


                <button *ngIf="!userNotConfirmed" class="mt-3" color="primary" mat-raised-button>Ingresar</button>
                <button (click)="confirmAccount()" *ngIf="userNotConfirmed" class="mt-3"
                        color="primary"
                        mat-raised-button
                        type="button">Confirmar cuenta
                </button>
                <div *ngIf="hasError" class="alert alert-danger mt-3 mb-0">{{errorMessage}}</div>
                <div *ngIf="!userNotConfirmed" class="d-flex justify-content-center mt-3">
                    <a (click)="goToForgotPassword()"><small>¿Olvidaste tu contraseña?</small></a>
                </div>
                <div *ngIf="userNotConfirmed" class="d-flex justify-content-center mt-3">
                    <a (click)="resetLogin()"><small>¿Te equivocaste de correo?</small></a>
                </div>
            </form>
            <div *ngIf="mobileQuery.matches" class="row mt-3 justify-content-center">
                <h2 class="subtitle">¿Aún no tienes una cuenta? <a (click)="goToRegister()"
                                                                   class="register">Registrate</a>
                </h2>
            </div>

        </div>
        <div *ngIf="!mobileQuery.matches" class="col-md-6 pl-5">
            <h1>Registrarse</h1>
            <h2 class="subtitle">¿Aún no tienes una cuenta?</h2><a (click)="goToRegister()"
                                                                   class="register">Registrate</a>
        </div>
    </div>
</div>
